jQuery(function($){
	$(document).ready(function(){
		

		var lastScrollTop = 0;
		var scrollDir = '';
		var stickyTopH  = 0;
		var stickyHeight = 0;
		var stickyMarginB = 0;
		var currentMarginT = 0;
		var topMargin = parseInt( $('.tag-cloud-text').css('margin-top') ) * 4;
		
		$(window).scroll(function(event){
			var st = $(this).scrollTop();
			if (st > lastScrollTop){scrollDir = 'down';} 
			else {scrollDir = 'up';}		
			lastScrollTop = st;
		});
			
		// $.fn.stickUp = function( options ) {
		// 	$(this).addClass('stuckMenu');
		// 	stickyTopH = parseInt( $('.tag-cloud-text').css('margin-top') );
		//       stickyHeight = parseInt( $(this).outerHeight());
		// 	vartop = parseInt($(this).offset().top);
		// };

		$.fn.stickUp=function() {       //jQuery插件写法
            var $nav = this,
                width = $nav.width(),
                height = $nav.height(),
                offsetTop = $nav.offset().top, //获取$nav上方到窗口的距离
                offsetLeft = $nav.offset().left;  //获取$nav上方到窗口的距离
            var $cloneNav = $nav.clone()
                .css("opacity", 0)  //clone$nav元素，并设置clone元素的属性
                .insertBefore($nav)
                .hide();
        };
			
		$(document).on('scroll', function() {
			varscroll = parseInt($(document).scrollTop());
			if(vartop < varscroll + topMargin){
				$('.stuckMenu').addClass('isStuck');
				$('.stuckMenu p').addClass('box-shadow');		
				$('.stuckMenu').next().closest('div').css({'margin-top': stickyTopH + stickyHeight  + 'px'}, 10);
				$('.stuckMenu').css("position","fixed");
				$('.isStuck').css({top: '0em'}, 10, function(){});
			};
			
			if(varscroll + topMargin < vartop){
				$('.stuckMenu').removeClass('isStuck');
				$('.stuckMenu p').removeClass('box-shadow');	
				$('.stuckMenu').next().closest('div').css({'margin-top': '0em'}, 10);
				$('.stuckMenu').css("position","relative");
			};
		});
	});
		
});
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			